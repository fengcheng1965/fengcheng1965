# 生产环境配置文件
# 苏顺植保网站 - 生产环境
# 版本: 1.0.0
# 最后更新: 2026-01-29

# ============================================
# 服务器环境配置
# ============================================
NODE_ENV=production
PORT=3000
HOST=0.0.0.0

# ============================================
# 数据库连接参数
# ============================================
DB_HOST=localhost
DB_PORT=3306
DB_USER=MySQL 80
DB_PASSWORD=Fc188022
DB_NAME=sushun_db
DB_CONNECTION_LIMIT=100
DB_QUEUE_LIMIT=0
DB_ACQUIRE_TIMEOUT=60000
DB_TIMEOUT=60000

# 数据库连接池配置
DB_POOL_MIN=5
DB_POOL_MAX=20
DB_POOL_IDLE_TIMEOUT=30000

# ============================================
# API服务地址
# ============================================
API_BASE_URL=http://localhost:3000
FRONTEND_URL=http://localhost:8080
ADMIN_URL=http://localhost:8080

# CORS配置
CORS_ORIGIN=http://localhost:8080
CORS_CREDENTIALS=true

# ============================================
# 安全认证密钥
# ============================================
# JWT密钥 (至少32字符，建议使用随机生成的强密码)
JWT_SECRET=sushun_zhibao_jwt_secret_key_2026_make_it_very_long_and_secure_for_production
JWT_EXPIRES_IN=7d
JWT_REFRESH_EXPIRES_IN=30d

# 密码加密盐值
BCRYPT_SALT_ROUNDS=12

# API密钥
API_KEY=sushun_zhibao_api_key_2026_production_secure
API_SECRET=sushun_zhibao_api_secret_2026_production_secure

# ============================================
# 会话配置
# ============================================
SESSION_SECRET=sushun_zhibao_session_secret_key_2026_production
SESSION_MAX_AGE=86400000
SESSION_SECURE=false
SESSION_HTTP_ONLY=true
SESSION_SAME_SITE=strict

# ============================================
# 日志级别设置
# ============================================
LOG_LEVEL=info
LOG_FORMAT=json
LOG_FILE_PATH=./logs/app.log
LOG_ERROR_PATH=./logs/error.log
LOG_MAX_SIZE=10m
LOG_MAX_FILES=14
LOG_DATE_PATTERN=YYYY-MM-DD

# 日志级别选项: error, warn, info, http, debug
# 生产环境建议: info 或 warn
# 开发环境建议: debug

# ============================================
# 资源限制参数
# ============================================
# 请求限制
REQUEST_TIMEOUT=30000
REQUEST_MAX_SIZE=10mb
REQUEST_RATE_LIMIT_WINDOW=900000
REQUEST_RATE_LIMIT_MAX=100

# 文件上传限制
FILE_UPLOAD_MAX_SIZE=5242880
FILE_UPLOAD_ALLOWED_TYPES=image/jpeg,image/png,image/gif,application/pdf

# 内存限制
NODE_MAX_OLD_SPACE_SIZE=2048
NODE_MAX_SEMI_SPACE_SIZE=128

# 并发连接限制
MAX_CONCURRENT_CONNECTIONS=1000
MAX_SOCKETS=50

# ============================================
# 缓存配置
# ============================================
CACHE_ENABLED=true
CACHE_TTL=3600
CACHE_MAX_SIZE=1000
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# ============================================
# 邮件服务配置
# ============================================
SMTP_HOST=smtp.example.com
SMTP_PORT=587
SMTP_SECURE=true
SMTP_USER=your-smtp-username
SMTP_PASSWORD=your-smtp-password
SMTP_FROM=noreply@sushunzb.com
SMTP_FROM_NAME=苏顺植保

# ============================================
# 短信服务配置
# ============================================
SMS_PROVIDER=aliyun
SMS_ACCESS_KEY=your-sms-access-key
SMS_ACCESS_SECRET=your-sms-access-secret
SMS_SIGN_NAME=苏顺植保
SMS_TEMPLATE_CODE=your-template-code

# ============================================
# 对象存储配置
# ============================================
# 阿里云OSS
OSS_REGION=oss-cn-hangzhou
OSS_ACCESS_KEY_ID=your-oss-access-key-id
OSS_ACCESS_KEY_SECRET=your-oss-access-key-secret
OSS_BUCKET=sushun-production
OSS_ENDPOINT=https://oss-cn-hangzhou.aliyuncs.com

# ============================================
# 监控告警配置
# ============================================
# Sentry错误监控
SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id
SENTRY_ENVIRONMENT=production
SENTRY_TRACES_SAMPLE_RATE=0.1

# 性能监控
PM2_ENABLED=true
PM2_INSTANCES=2
PM2_MAX_MEMORY_RESTART=1G

# 健康检查
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_INTERVAL=30000
HEALTH_CHECK_TIMEOUT=5000

# ============================================
# CDN配置
# ============================================
CDN_ENABLED=false
CDN_DOMAIN=https://cdn.sushunzb.com
CDN_STATIC_PATH=/static

# ============================================
# SSL/TLS配置
# ============================================
SSL_ENABLED=false
SSL_CERT_PATH=/etc/ssl/certs/sushunzb.com.crt
SSL_KEY_PATH=/etc/ssl/private/sushunzb.com.key
SSL_CA_PATH=/etc/ssl/certs/ca-bundle.crt

# ============================================
# 备份配置
# ============================================
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=sushun-backups
BACKUP_S3_REGION=oss-cn-hangzhou

# ============================================
# 第三方服务配置
# ============================================
# 百度统计
BAIDU_ANALYTICS_ID=your-baidu-analytics-id

# 谷歌分析
GOOGLE_ANALYTICS_ID=your-google-analytics-id

# ============================================
# 功能开关
# ============================================
FEATURE_REGISTRATION_ENABLED=true
FEATURE_MAINTENANCE_MODE=false
FEATURE_DEMO_MODE=false
FEATURE_BETA_FEATURES=false

# ============================================
# 安全配置
# ============================================
# 内容安全策略
CSP_ENABLED=true
CSP_DEFAULT_SRC=self
CSP_SCRIPT_SRC=self 'unsafe-inline'
CSP_STYLE_SRC=self 'unsafe-inline'
CSP_IMG_SRC=self data: https:
CSP_CONNECT_SRC=self http://localhost:3000

# 速率限制
RATE_LIMIT_ENABLED=true
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# IP白名单
IP_WHITELIST_ENABLED=false
IP_WHITELIST=127.0.0.1,::1

# ============================================
# 运维配置
# ============================================
# 维护模式
MAINTENANCE_MODE=false
MAINTENANCE_MESSAGE=系统维护中，请稍后访问

# 调试模式
DEBUG=false
VERBOSE=false

# ============================================
# 版本信息
# ============================================
APP_VERSION=1.0.0
BUILD_DATE=2026-01-29
DEPLOYMENT_ENV=production
